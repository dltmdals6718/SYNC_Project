*&---------------------------------------------------------------------*
*& Include          ZFCRFI0020C01
*&---------------------------------------------------------------------*

CLASS LCL_NODE_EVENT_HANDLER DEFINITION.
* 어디서든 어떤 프로그램이든 Access 가능
  PUBLIC SECTION.
    METHODS: ON_NODE_DOUBLE_CLICK FOR EVENT NODE_DOUBLE_CLICK OF CL_GUI_SIMPLE_TREE
      IMPORTING NODE_KEY.

*   Static Attribute
    CLASS-DATA: GV_NODE_KEY TYPE TV_NODEKEY.

*   Instance Attribute
*    DATA: MV_NODE_KEY TYPE TV_NODEKEY.

* 해당 클래스에서만 Access 가능
  PRIVATE SECTION.
    DATA: MV_DIR_PREFIX TYPE STRING VALUE 'DIR_*'.

ENDCLASS.

CLASS LCL_NODE_EVENT_HANDLER IMPLEMENTATION.
  METHOD ON_NODE_DOUBLE_CLICK.

    LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY = NODE_KEY.

    IF NOT NODE_KEY CP MV_DIR_PREFIX.
      PERFORM GET_GLDATA USING NODE_KEY.
    ELSEIF NODE_KEY CP MV_DIR_PREFIX.
      PERFORM EXPAND_DIR USING NODE_KEY.
    ENDIF.

  ENDMETHOD.
ENDCLASS.

CLASS LCL_GL_EVENT_HANDLER DEFINITION.
  PUBLIC SECTION.
    CLASS-METHODS:
      ON_HOTSPOT_CLICK FOR EVENT HOTSPOT_CLICK
        OF CL_GUI_ALV_GRID
        IMPORTING ES_ROW_NO E_COLUMN_ID.

ENDCLASS.

CLASS LCL_GL_EVENT_HANDLER IMPLEMENTATION.

  METHOD ON_HOTSPOT_CLICK.

    CASE E_COLUMN_ID-FIELDNAME.
      WHEN 'DEBIT'.
        PERFORM DETAIL_SELECTED_GLOUTPUT
             USING
               LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY
               'S'.
      WHEN 'CREDIT'.
        PERFORM DETAIL_SELECTED_GLOUTPUT
             USING
               LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY
               'H'.
    ENDCASE.

  ENDMETHOD.
ENDCLASS.

CLASS LCL_DETAIL_EVENT_HANDLER DEFINITION.
  PUBLIC SECTION.
    CLASS-METHODS:
      ON_HOTSPOT_CLICK FOR EVENT HOTSPOT_CLICK
        OF CL_GUI_ALV_GRID
        IMPORTING ES_ROW_NO E_COLUMN_ID.

ENDCLASS.

CLASS LCL_DETAIL_EVENT_HANDLER IMPLEMENTATION.
  METHOD ON_HOTSPOT_CLICK.

    DATA: LV_ROW_ID TYPE LVC_S_ROID-ROW_ID.
    LV_ROW_ID = ES_ROW_NO-ROW_ID.

    CASE E_COLUMN_ID-FIELDNAME.
      WHEN 'BELNR'.
        PERFORM DETAIL_SELECTED_BELNR
          USING LV_ROW_ID.
      WHEN 'LIFNR'.
        PERFORM DETAIL_SELECTED_LIFNR
          USING LV_ROW_ID.
      WHEN 'KUNNR'.
        PERFORM DETAIL_SELECTED_KUNNR
          USING LV_ROW_ID.
      WHEN 'PERNR'.
        PERFORM DETAIL_SELECTED_PERNR
          USING LV_ROW_ID.
    ENDCASE.

  ENDMETHOD.
ENDCLASS.
