*&---------------------------------------------------------------------*
*& Include          ZFCRFU0030C01
*&---------------------------------------------------------------------*
CLASS LCL_NODE_EVENT_HANDLER DEFINITION.
  PUBLIC SECTION.
    METHODS: ON_NODE_DOUBLE_CLICK FOR EVENT NODE_DOUBLE_CLICK OF CL_GUI_SIMPLE_TREE
      IMPORTING NODE_KEY.

    CLASS-DATA: GV_NODE_KEY TYPE TV_NODEKEY.

  PRIVATE SECTION.
    DATA: MV_DIR_PREFIX TYPE STRING VALUE 'DIR_*'.

ENDCLASS.

CLASS LCL_NODE_EVENT_HANDLER IMPLEMENTATION.
  METHOD ON_NODE_DOUBLE_CLICK.

    LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY = NODE_KEY.

    IF NOT NODE_KEY CP MV_DIR_PREFIX.
      PERFORM GET_BALANCE_DATA USING NODE_KEY.
    ELSEIF NODE_KEY CP MV_DIR_PREFIX.
      PERFORM EXPAND_DIR USING NODE_KEY.
    ENDIF.

  ENDMETHOD.
ENDCLASS.

CLASS LCL_BALANCE_EVENT_HANDLER DEFINITION.
  PUBLIC SECTION.
    CLASS-METHODS:
      ON_HOTSPOT_CLICK FOR EVENT HOTSPOT_CLICK
        OF CL_GUI_ALV_GRID
        IMPORTING ES_ROW_NO E_COLUMN_ID.
ENDCLASS.

CLASS LCL_BALANCE_EVENT_HANDLER IMPLEMENTATION.
  METHOD ON_HOTSPOT_CLICK.

*   DO_SUM 핫스팟 클릭 방지
    IF ES_ROW_NO-ROW_ID = 0.
      RETURN.
    ENDIF.

    CASE E_COLUMN_ID-FIELDNAME.
      WHEN 'DEBIT'.
        PERFORM DETAIL_SELECTED_BALANCE
         USING
           LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY
           'S'
           ES_ROW_NO-ROW_ID.
      WHEN 'CREDIT'.
        PERFORM DETAIL_SELECTED_BALANCE
         USING
           LCL_NODE_EVENT_HANDLER=>GV_NODE_KEY
           'H'
           ES_ROW_NO-ROW_ID.
    ENDCASE.

  ENDMETHOD.
ENDCLASS.


CLASS LCL_HISTORY_EVENT_HANDLER DEFINITION.
  PUBLIC SECTION.
    CLASS-METHODS:
      ON_HOTSPOT_CLICK FOR EVENT HOTSPOT_CLICK
        OF CL_GUI_ALV_GRID
        IMPORTING ES_ROW_NO E_COLUMN_ID.
ENDCLASS.

CLASS LCL_HISTORY_EVENT_HANDLER IMPLEMENTATION.
  METHOD ON_HOTSPOT_CLICK.
    CASE E_COLUMN_ID-FIELDNAME.
      WHEN 'BELNR'.
        PERFORM DETAIL_SELECTED_BELNR
          USING ES_ROW_NO-ROW_ID.
    ENDCASE.
  ENDMETHOD.
ENDCLASS.
